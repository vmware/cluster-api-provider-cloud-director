{
  "definitions": {
    "k8sNetwork": {
      "type": "object",
      "description": "The network-related settings for the cluster.",
      "properties": {
        "pods": {
          "type": "object",
          "description": "The network settings for Kubernetes pods.",
          "properties": {
            "cidrBlocks": {
              "type": "array",
              "description": "Specifies a range of IP addresses to use for Kubernetes pods.",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "services": {
          "type": "object",
          "description": "The network settings for Kubernetes services",
          "properties": {
            "cidrBlocks": {
              "type": "array",
              "description": "The range of IP addresses to use for Kubernetes services",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "type": "object",
  "properties": {
    "kind": {
      "enum": [
        "CAPVCDCluster"
      ],
      "type": "string",
      "description": "The kind of the Kubernetes cluster."
    },
    "spec": {
      "type": "object",
      "properties": {
        "capiYaml": {
          "type": "string"
        },
        "yamlSet": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "vcdOrg": {
          "type": "array",
          "items":  {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Organization name in which the cluster needs to be managed"
              },
              "id": {
                "type": "string",
                "description": "organizaiton ID of the Organization in which the cluster needs to be managed"
              }
            }
          },
          "description": "The Organizations in which cluster needs to be created or managed."
        },
        "orgVdc": {
          "type": "array",
          "items": {
            "type": "object",
            "description": "organization virtual data centers in which the cluster needs to be managed",
            "properties": {
              "name": {
                "type": "string",
                "description": "Org VDC name of the virtual data center in which the cluster needs to be managed"
              },
              "id": {
                "type": "string",
                "description": "Org VDC ID of the virtual data center in which the cluster needs to be managed"
              }
            }
          }
        },
        "name": {
          "type": "string",
          "description": "The name of the cluster."
        },
        "site": {
          "type": "string",
          "description": "Fully Qualified Domain Name of the VCD site in which the cluster is deployed"
        }
      }
    },
    "status": {
      "type": "object",
      "x-vcloud-restricted": "protected",
      "properties": {
        "capvcd": {
          "type": "object",
          "properties": {
            "phase": {
              "type": "string"
            },
            "kubernetes": {
              "type": "string"
            },
            "errorSet": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {}
              }
            },
            "eventSet": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {}
              }
            },
            "k8sNetwork": {
              "$ref": "#/definitions/k8sNetwork"
            },
            "uid": {
              "type": "string"
            },
            "parentUid": {
              "type": "string"
            },
            "useAsManagementCluster": {
              "type": "boolean"
            },
            "clusterApiStatus": {
              "type": "object",
              "properties": {
                "phase": {
                  "type": "string",
                  "description": "The phase describing the control plane infrastructure deployment."
                },
                "apiEndpoints": {
                  "type": "array",
                  "description": "Control Plane load balancer endpoints",
                  "items": {
                    "host": {
                      "type": "string"
                    },
                    "port": {
                      "type": "integer"
                    }
                  }
                }
              }
            },
            "nodePool": {
              "additionalProperties": {
                "type": "string",
                "properties": {}
              }
            },
            "clusterResourceSet": {
              "properties": {}
            },
            "clusterResourceSetBindings": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "clusterResourceSetName": {
                    "type": "string"
                  },
                  "kind": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "applied": {
                    "type": "boolean"
                  },
                  "lastAppliedTime": {
                    "type": "string"
                  }
                }
              }
            },
            "capvcdVersion": {
              "type": "string"
            },
            "vcdProperties": {
              "type": "object",
              "properties": {
                "vcdOrg": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "id": {
                      "type": "string"
                    }
                  }
                },
                "ovdcNetworkName": {
                  "type": "string"
                },
                "site": {
                  "type": "string"
                },
                "orgVdc": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "id": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "upgrade": {
              "type": "object",
              "description": "determines the state of upgrade. If no upgrade is issued, only the existing version is stored.",
              "properties": {
                "current": {
                  "type": "object",
                  "properties": {
                    "kubernetesVersion": {
                      "type": "string",
                      "description": "current kubernetes version of the cluster. If being upgraded, will represent target kubernetes version of the cluster."
                    },
                    "tkgVersion": {
                      "type": "string",
                      "description": "current TKG version of the cluster. If being upgraded, will represent the tarkget TKG version of the cluster."
                    }
                  }
                },
                "previous": {
                  "type": "object",
                  "properties": {
                    "kubernetesVersion": {
                      "type": "string",
                      "description": "the kubernetes version from which the cluster was upgraded from. If cluster upgrade is still in progress, the field will represent the source kubernetes version from which the cluster is being upgraded."
                    },
                    "tkgVersion": {
                      "type": "string",
                      "description": "the TKG version from which the cluster was upgraded from. If cluster upgrade is still in progress, the field will represent the source TKG versoin from which the cluster is being upgraded."
                    }
                  }
                },
                "ready": {
                  "type": "boolean",
                  "description": "boolean indicating the status of the cluster upgrade."
                }
              }
            },
            "private": {
              "type": "object",
              "x-vcloud-restricted": "private",
              "description": "Placeholder for the properties invisible to non-admin users.",
              "properties": {
                "kubeConfig": {
                  "type": "string",
                  "description": "Admin kube config to access the Kubernetes cluster."
                }
              }
            },
            "vcdResourceSet": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {}
              }
            },
            "createdByVersion": {
              "type": "string",
              "description": "CAPVCD version used to create the cluster"
            }
          }
        }
      }
    }
  }
}
